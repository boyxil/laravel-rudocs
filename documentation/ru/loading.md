# Автозагрузка классов

## Содержание

- [основы](#the-basics)
- [Регистрация директорий](#directories)
- [Регистрация карт файл-класс](#mappings)
- [Регистрация пространств имен](#namespaces)

<a name="the-basics"></a>
## Основы

Автозагрузка обеспечивает "ленивую" загрузку файлов классов тогда, когда они необходимы, без явных *requiring* или *including*. Таким образом, только необходмые классы загружаются в приложении, и вы смело можете обращаться к классам будучи уверенным, что необходимый файл загрузиться автоматически.

По умолчании, директории **models** и **libraries** регистрируются для автозагрузки в файле **application/start.php**. Загрузчик использует соглашение о том, что имена файлов, содержащих классы пишутся в нижнем регистре. То есть, например, класс "User" должен содержаться в файле с именем "user.php".
Вы также можете связывать классы, используя поддиректории. При этом пространство имен должно копировать структуру директорий. Например, класс "Entities\User" находится в файле "entities/user.php".

<a name="directories"></a>
## Регистрация директорий

Как указывалось выше, директории моделей и библиотек регистрируются автозагрузчиком по умолчанию; в то же время, вы можете зарегистрировать дополнительные директории, содержащие нужные вам классы, соблюдая соглашения об именах:

#### Регистрация директорий в автозагрузчике:

	Autoloader::directories(array(
		path('app').'entities',
		path('app').'repositories',
	));

<a name="mappings"></a>
## Регистрация карт классов

Вы можете самостоятельно сопоставить файлы и классы. Это наиболее производительный способ загрузки классов: 

#### Регистрация карты классов в автозагрузчике:

	Autoloader::map(array(
		'User'    => path('app').'models/user.php',
		'Contact' => path('app').'models/contact.php',
	));

<a name="namespaces"></a>
## Регистрация пространств имен

Многие сторонние библиотеки используютс стандарт PSR-0 в своей структуре. PSR-0 подразумевает, что файлы классов именуются в соответствии с именами классов, и структура директорий отображает пространсво имен.
Many third-party libraries use the PSR-0 standard for their structure. PSR-0 states that class names should match their file names, and directory structure is indicated by namespaces. Если вы используете PSR-0 библиотеку, то просто зарегистрируйте ее корень пространства имен и каталогов автозагрузчиком:

#### Регистрация пространства имен автозагрузчиком:

	Autoloader::namespaces(array(
		'Doctrine' => path('libraries').'Doctrine',
	));

Также вы можете зарегистрировать бибилиотеки, не имеющие пространства имен, но использующие символ подчеркивания для создания иерархии. Например, зарегистрируем библиотеку SwiftMailer, классы котоорой имеют префикс "Swift_":

####Регистрация "underscored" библиотек:

	Autoloader::underscored(array(
		'Swift' => path('libraries').'SwiftMailer',
	));
