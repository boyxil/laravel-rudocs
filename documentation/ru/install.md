# Установка и настройка

## Содержание

- [Требования](#Требования)
- [Установка](#установка)
- [Конфигурация сервера: почему Public?](#Конфигурация-сервера)
- [Базовая конфигурация](#Базовая-конфигурация)
- [Окружение](#Окружение)
- [Очистка URLs](#Очистка-urls)

<a name="Требования"></a>
## Требования

- Apache, nginx, или другой web-сервер.
- Laravel использует все возможности только с PHP не ниже 5.3. Конечно же, требуетсся PHP 5.3.
- Laravel использует [FileInfo library](http://php.net/manual/en/book.fileinfo.php) для распознования mime-types. Это включено по умолчанию в PHP 5.3. Возможно, пользователям Windows нужно будет добавить строку в php.ini для активации Fileinfo модуля. Детальнее - [installation / configuration details on PHP.net](http://php.net/manual/en/fileinfo.installation.php).
- Laravel использует [Mcrypt library](http://php.net/manual/en/book.mcrypt.php) для шифрования и генерации хэш. Mcrypt обычно уже установлен с PHP. Возможно, понадобится дополнительная настройка (или установка, если mcrypt не установлен)[installation / configuration details on PHP.net](http://php.net/manual/en/book.mcrypt.php).

<a name="установка"></a>
## Установка

1. [Загрузите Laravel](http://laravel.com/download)
2. Разархивируйте Laravel-архив в соответствующую вашему сайту папку на сервере.
3. Установите значение **key** в **config/application.php** в случайную строку символов длиной 32 символа.
4. Откройте ваш новый сайт в браузере. Не забудьте, что ваш новый сайт находится в папке **public**!

Если все сложилось удачно, вы увидите страницу приветствия Laravel.

### Дополнения

Установите необходимые вам дополнения :

- SQLite, MySQL, PostgreSQL, или SQL Server PDO drivers. 
- Memcached или APC.

### Не получается?

Если у вас возникли трудности при установке, обратите внимание на нижеследующее:

- Убедитесь, что директоория **public** является корневой для сервера. (см: Конфигурация сервера ниже)
- Если активен mod_rewrite, установите **index** опцию в  **application/config/application.php** пустой строкой.
- Проверьте права доступа на запись для корневой директории сервера.

<a name="Конфигурация-сервера"></a>
## Конфигурация сервера: Почему Public?

Так же, как и другие фрейиворки, Laravel нацелен на защиту кода вашего приложения, пакетов и локального хранилища данных путем размещения в корневой директории сайта только необходимых файлов. Это один из способов обеспечения безопасности.

В этом примере рассматривается, как установить Laravel в **/Users/JonSnow/Sites/MySite**.

Наиболее простая конфигурация Apache VirtualHost для MySite может выглядеть так.

	<VirtualHost *:80>
		DocumentRoot /Users/JonSnow/Sites/MySite/public
		ServerName mysite.local
	</VirtualHost>

Заметьте, несмотря на то, что Laravel установлен в **/Users/JonSnow/Sites/MySite** наш DocumentRoot указывает **/Users/JonSnow/Sites/MySite/public**.

Указание DocumentRoot несомненно, лучшее решение. Однако, иногда, при использовании Laravel на хостинге, у вас может не быть возможности переопределить DocumentRoot. Тогда можно обратиться к администратору хостинга для переопределения корневой директории. Второе решение состоит в том, чтобы использовать дополнительный .htaccess в корневой директории сайта. Он может выглядеть так.

	<IfModule mod_rewrite.c>
      RewriteEngine on
      RewriteCond %{REQUEST_URI} !^public
      RewriteRule ^(.*)$ public/$1 [L]
	</IfModule>


Дополнительную информацию по этому вопросу можно найти здесь: [Laravel Forums](http://forums.laravel.com/viewtopic.php?pid=10023#p10023), а также обратившись к документации по серверу, который вы используете.


<a name="Базовая-конфигурация"></a>
## Базовая конфигурация

Все конфигурационные файлы вашего приложения находятся в aplication/config директории. Рекомендуем просмотреть все содержащиеся там файлы, чтобы иметь представление о доступных опциях. Особо обратите внимание на **application/config/application.php** - этот файл содержит базовые настройки вашего приложения.

Очень **важно** изменить значение **application key** перед началом работы с сайтом. Этот ключ используется повсеместно фреймворком для шифрования, создания хэшей т.п. Находится он в файле **config/application.php** и должен содержать строку случайных символов длиной 32 символа.Вы можете генерировать эту строку при помощи консольной утилиты Artisan. Более подробно: [Artisan command index](/docs/artisan/commands).

> **На заметку:** Если вы используете mod_rewrite, необходимо опцию **index** установить пустой строкой.

<a name="Окружение"></a>
## Окружение

Скорее всего, настройки окружения при разработке приложения и при рабочей эксплуатации различаются. Механизм применения  окружения Laravel базируется на URL, что позволяет легко управлять окружением. Откройте `paths.php` в главной директории проекта. Там вы найдете:

	$environments = array(

		'local' => array('http://localhost*', '*.dev'),

	);

Это сообщает Laravel что любой URLs начинающийся с "localhost" или заканчивающийся ".dev" следует рассматривать как "local" окружение.

Далее, создайте директорию **application/config/local**. Любые файлы и опции, размещенные в этой директории заменяют (переписывают) опции из директории **application/config**. Например, вы можете создать новый **application.php** в новом окружении **local** в директории **application/config/local**:

	return array(

		'url' => 'http://localhost/laravel/public',

	);

В этом примере, локальный **URL** перекрывает **URL** в **application/config/application.php**. Обратите внимание, вам нужно определить только те параметры, котрые вы хотите изменить.

Просто, не правда-ли? Вы можете создать столько окружений, сколько вам нужно!

<a name="Чистые-url"></a>
## Чистые URL

По-видимому, вам не захочется иметь в адресе сайта "index.php". Вы можете его убрать посредством HTTP модуля Apache mod_rewrite. Просто создайте **.htaccess** файл в **public** директории, например:

	<IfModule mod_rewrite.c>
	     RewriteEngine on

	     RewriteCond %{REQUEST_FILENAME} !-f
	     RewriteCond %{REQUEST_FILENAME} !-d

	     RewriteRule ^(.*)$ index.php/$1 [L]
	</IfModule>

Не работает? Попробуйте так:

	Options +FollowSymLinks
	RewriteEngine on

	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d

	RewriteRule . index.php [L]

После настройки mod_rewrite **index** опцию конфигурации в **application/config/application.php** установите пустой строкой.

> **Примечание:** По настройке правил mod_rewrite для различных серверов обратитесь к документации используемого сервера.
